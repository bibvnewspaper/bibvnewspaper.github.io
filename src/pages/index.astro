---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const allIssues = (await getCollection("issues"))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());

const latest = allIssues[0];

const formatDate = (date) =>
  new Intl.DateTimeFormat("en-US", {
    month: "long",
    day: "numeric",
    year: "numeric",
  }).format(date);
---

<BaseLayout
  title="On a Monthly BASIS Newspaper"
  description="BASIS Independent Bellevue Newspaper Club"
>
  <section class="hero hero-home">
    <div class="hero-copy">
      <div class="eyebrow">BASIS Independent Bellevue</div>
      <h1>On a <i>Monthly</i> BASIS</h1>
      <p class="hero-intro">
        We are the <i>On A Monthly BASIS</i> newspaper club. Welcome to our website, developed and deployed by Hengsheng!
      </p>
    </div>
    <figure class="hero-logo" aria-label="On a Monthly Basis newspaper logo">
      <img src="/images/logo-all.png" alt="On a MONTHLY BASIS logo" loading="eager" />
    </figure>
  </section>

  <section class="panel">
    <h2 class="section-title">Latest Release</h2>
    {latest ? (
      <div class="issue-card">
        <div class="eyebrow">{latest.data.issue}</div>
        <h3>{latest.data.title}</h3>
        <p>{latest.data.summary}</p>
        <div class="article-meta card">
          <span>{formatDate(latest.data.date)}</span>
          <a class="button" href={`/issues/${latest.slug}`}>Read</a>
        </div>
      </div>
    ) : (
      <p>No releases yet. Add your first issue in `src/content/issues`.</p>
    )}
  </section>

  <section class="panel guidelines-panel">
    <h2 class="section-title">Contribution Guidelines</h2>
    <p class="guidelines-copy">
      Last Updated February 26th, 2026, Hengsheng Wang. I'm still working on the CONTRIBUTING.md file for future Github contributors that will take up most of the workload. I'm going to put some more information about how you can create pull requests, do code reviews (so that I can approve whatever you've done) and more.
    </p>

    <p class="guidelines-copy">
      I'm also working on updating the Changelog more frequently, but of course you can always just look into the Blame and Diffs section of the previous deployments and commitments.
    </p>
  </section>
</BaseLayout>
